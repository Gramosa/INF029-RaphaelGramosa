#include <stdio.h>
#include <stdbool.h>

//
#define MAX_STUDENTS_CLASS 3
#define MAX_LETTERS 32

#define MAX_STUDENTS 2
#define MAX_TEACHERS 5
#define MAX_SUBJECTS 5

typedef struct {
  int regist, age, birth[3], cpf;
  char gender;
  char name[MAX_LETTERS];
} Person;

typedef struct {
  char name[MAX_LETTERS];
  int code, period;
  int number_of_students;
  Person students[MAX_STUDENTS_CLASS];
  Person teacher;
} Subject;

Person students[MAX_STUDENTS];
Person teachers[MAX_TEACHERS];
Subject subjects[MAX_SUBJECTS];
int numberOfStudents = 0;

// Cadastrar 
Person createPerson(){
  Person person;
  printf(" === Cadastro de Pessoa === \n");
  printf("Digite o nome: ");
  scanf("%s", person.name);
  printf("Digite o numero de matricula: ");
  scanf("%d", &person.regist);
  printf("Digite a idade: ");
  scanf("%d", &person.age);
  printf("Digite o sexo(M/F): ");
  scanf(" %c", &person.gender);
  printf("\n");
  return person;
}

void addStudent(){
  if(numberOfStudents == MAX_STUDENTS){
    printf("Nao e possivel adicionar mais alunos\n");
    return;
  }
  
  Person student = createPerson();
  if(numberOfStudents < MAX_STUDENTS){
    students[numberOfStudents] = student;
    numberOfStudents++;
  }
}

void addTeacher(Person teacher){
  if(numberOfStudents < MAX_TEACHERS){
    teachers[numberOfStudents] = teacher;
    numberOfStudents++;
  }
}

// Listar
void listStudents(){
  if(numberOfStudents == 0){
    printf("Nao ha alunos cadastrados\n");
    return;
  }
  
  printf("=== Lista de Alunos ===\n");
  for(int i = 0; i < numberOfStudents; i++){
    printf("Aluno numero %d:\n", i+1);
    printf("Matricula: %d, ", students[i].regist);
    printf("Nome: %s, ", students[i].name);
    printf("\n");
  }
}

/*void addStudentOnClass(Subject* sub, Person student){
  int i;
  for(i = 0; i < MAX_STUDENTS_CLASS; i++){
    if(sub->students[i].is_registered == false){
      student.is_registered = true;
      sub->students[i] = student;
      break;
    }
  }
  if(i == MAX_STUDENTS){
    printf("Não tem vagas disponíveis para o aluno %s.\n", student.name);
  }
}
*/

//Menu's
//submenu para cadastrar aluno
void registerStudentMenu(){
  int chat;
  while(true){
    printf("=== Registro de aluno ===\n");
    printf("0 - Voltar\n");
    printf("1 - Cadastrar novo aluno.\n");
    printf("2 - Atualizar dados de um aluno.\n");
    printf("3 - Inserir aluno em uma disciplina.\n");
    printf("4 - Remover aluno de uma disciplina.\n");
    printf("Digite: ");
    scanf("%d", &chat);
    printf("\n");
    if(chat == 0){
      return;
    }
    switch(chat){
      case 1:
        addStudent();
        break;
      //case 2:
        //updateStudent();
    }
    
  }
}

//submenu para relatorios
void reportMenu(){
  int chat;
  while(true){
    printf("=== Relatorios ===\n");
    printf("0 - Voltar\n");
    printf("1 - Listar alunos.\n");
    printf("Digite: ");
    scanf("%d", &chat);
    printf("\n");
    if(chat == 0){
      return;
    }
    switch(chat){
      case 1:
        listStudents();
        break;
    }
  }
}

int main() {
  
  int chat;
  while(true){
    printf("=== Bem vindo ao chat da escola! ===\n");
    printf("0 - Sair\n");
    printf("1 - Cadastrar aluno\n");
    printf("2 - Cadastrar professor\n");
    printf("3 - Cadastrar disciplina\n");
    printf("4 - Relatorios\n");
    printf("Digite: ");
    scanf("%d", &chat);
    printf("\n");
    if(chat == 0){
      break;
    }
    switch(chat){
      case 1:
        registerStudentMenu();
        break;
      case 4:
        reportMenu();
        break;
    }
  }
  
  return 0;
}